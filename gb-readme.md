# Оглавление

Официальную инструкцию по установке Go, вы сможете найти [здесь](https://golang.org/doc/install).

В этом руководстве предполагается, что вы работали с диспетчерами пакетов, например, [Homebrew](https://brew.sh/), [Chocolatey](https://chocolatey.org/), [apt](https://help.ubuntu.com/community/AptGet/Howto) или [yum](https://access.redhat.com/solutions/9934).

В демонстрационных целях мы покажем процедуру установки OSX с использованием Homebrew.

## Установка {#installation}

Процесс установки очень прост. Во-первых, открыв Terminal, вам нужно выполнить команду ниже, чтобы установить homebrew \(завариварить\). Brew имеет зависимость от Xcode, поэтому вы должны убедиться в том, что присутствуют.

```bash
xcode-select --install
```

Затем мы запускаем следующую команду, чтобы уже установить сам homebrew:

```bash
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
```

Наконец-то вы можете установить сам Go:

```bash
brew install go
```

Если вы собираетесь запускать свои программы на Linux-серверах, включить функцию кросс-компиляции используя следующую команду:

```bash
brew install go --cross-compile-common
```

_Вы должны следовать инструкциям, рекомендованным вашим менеджером пакетов. **Обратите внимание**, что они могут отличаться для определенной ОС._

Узнать версию Go можно вот так:

```bash
$ go version go1.10.3 darwin/amd64
```

## Среда окружения Go {#go-environment}

Go упрям.

Соглашение говорит о том, что весь код Go живет в одной рабочей области \(в папке\). Это рабочее пространство может быть где угодно. Если вы не укажете `$HOME/go`, Go примет как его рабочее пространство по-умолчанию. Рабочая область идентифицируется \(и модифицируется\) переменной окружения  [`GOPATH`](https://golang.org/cmd/go/#hdr-GOPATH_environment_variable).

Вы должны установить переменную среды, чтобы впоследствии ее использовать в скриптах, оболочках и т.д.

Добавите эти строки в `~/.bashrc` или `~/.zshrc`, чтобы включать следующие экспортные данные:

```bash
export GOPATH=$HOME/go
export PATH=$PATH:$GOPATH/bin
```

_Обратите внимание_, что вы должны перезагрузить терминал для загрузки этих переменных.

Go предполагает, что ваше рабочее пространство содержит определенную структуру каталогов.

Go размещает свои файлы в трех каталогах: весь исходный код живет в `src`, объекты пакета живут в `pkg`, а скомпилированные программы живут в `bin`. Вы можете создать эти каталоги следующим образом.

```bash
mkdir -p $GOPATH/src $GOPATH/pkg $GOPATH/bin
```

На этом этапе вы можете перейти, и в `src/package/bin` будет правильно установлен в соответствующем каталоге `$GOPATH/xxx`.

## Редактор Go {#go-editor}

Выбор редактора является довольно индивидуальным занятием, возможно, у вас уже есть предпочтение, поддерживающее Go. Если нет, вы можете рассмотреть редактор, такой как [Visual Studio Code](https://code.visualstudio.com/), который имеет исключительную поддержку Go.

Чтобы установить VS Code с использованием `brew`, поскольку это приложение для графического интерфейса, вам необходимо расширение для homebrew, называемое `cask`, для поддержки установки VS Code.

```bash
brew tap caskroom/cask
```

На этом этапе вы можете использовать `brew` для установки VS Code.

```bash
brew cask install visual-studio-code
```

Вы можете проверить правильность установки VS Code, запустив следующую команду.

```bash
code .
```

VS Code поставляется с очень маленьким программным обеспечением, вы можете включить новое программное обеспечение, установив расширения. Чтобы добавить поддержку Go, вы должны установить расширение, существует множество доступных для VS Code, исключительным является [пакет Люка Хобана](https://github.com/Microsoft/vscode-go). Это можно установить следующим образом:

```bash
code --install-extension ms-vscode.go
```

Когда вы впервые открываете файл Go в VS Code, он будет указывать на отсутствие инструментов анализа, вы должны нажать кнопку установки. Список инструментов, которые устанавливаются \(и используются\) VS Code, доступны [здесь](https://github.com/Microsoft/vscode-go/wiki/Go-tools-that-the-Go-extension-depends-on).

## Отладчик Go {#go-debugger}

Хорошим вариантом для отладки Go \(который интегрирован с VS Code\) является Delve. Это можно установить используя `go get`:

```bash
go get -u github.com/derekparker/delve/cmd/dlv
```

## Линтер Go {#go-linting}

Улучшение по-умолчанию можно настроить с помощью [Gometalinter](https://github.com/alecthomas/gometalinter).

Его можно установить следующим образом:

```bash
go get -u github.com/alecthomas/gometalinter
gometalinter --install
```

## Рефакторинг и ваши инструменты {#refactoring-and-your-tooling}

Большой акцент этой книги связан с важностью рефакторинга.

Ваши инструменты помогут вам с большей уверенностью справиться с рефакторингом.

Чтобы понять, насколько хорошо вы знакомы со своим ректором кода, вы должны выполнить следующее с помощью простой комбинации клавиш:

* **Извлечение/Встраивание переменной**. Вы должны уметь быстро извлекать код, например, из длинного условия в переменную, а также встраивать условия из переменных отдельно.
* **Извлечение/Встраивание Метода/Функции**. Крайне важно иметь возможность выполнять раздел кода и извлекать/встраивать код в отдельные области \(функции или методы\).
* **Переименование**. Вы должны иметь возможность уверенно и быстро переименовывать символы в файлах.
* **go fmt**. У Go есть оценочный форматировщик — `go fmt`. Ваш редактор должен запускать это при каждом сохранении файла.
* **Запуск тестов**. Разумеется, вы должны иметь возможность сделать что-либо из вышеперечисленного, а затем быстро повторно запустить свои тесты, чтобы убедиться, что ваш рефакторинг не ничего сломал.

Кроме того, чтобы помочь вам работать с кодом, вы должны иметь возможность:

* **Просмотреть подпись функции** - Вы никогда не должны быть неуверенны в том, как вызвать функцию в Go. Ваша IDE должна описывать функцию с точки зрения ее документации, ее параметров и того, что она возвращает.
* **Определение функции просмотра** - Если до сих пор неясно, что делает функция, вы должны уметь перейти к исходному коду и понять это самостоятельно.
* **Найти использование символа** - Возможность увидеть контекст вызываемой функции может помочь вашему процессу принятия решения при рефакторинге.

Освоение ваших инструментов поможет вам сконцентрироваться на коде и уменьшить переключение контекста.

## Завершение {#wrapping-up}

На этом этапе у вас должен быть установлен Go, доступен редактор и некоторые базовые инструменты. Go имеет очень большую экосистему сторонних продуктов. Мы определили здесь несколько полезных компонентов, для более полного списка см. [https://awesome-go.com](https://awesome-go.com/).

